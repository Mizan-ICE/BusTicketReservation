{"ast":null,"code":"import { EventEmitter } from '@angular/core';\nimport { SeatStatus } from '../../models/bus.model';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common\";\nfunction SeatMapComponent_div_1_ng_container_1_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ÉµÉµelement(0, \"div\", 10);\n  }\n}\nfunction SeatMapComponent_div_1_ng_container_1_button_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.ÉµÉµgetCurrentView();\n    i0.ÉµÉµelementStart(0, \"button\", 11);\n    i0.ÉµÉµlistener(\"click\", function SeatMapComponent_div_1_ng_container_1_button_2_Template_button_click_0_listener() {\n      i0.ÉµÉµrestoreView(_r1);\n      const item_r2 = i0.ÉµÉµnextContext().$implicit;\n      const ctx_r2 = i0.ÉµÉµnextContext(2);\n      return i0.ÉµÉµresetView(ctx_r2.toggleSeat(item_r2.seat));\n    });\n    i0.ÉµÉµelementStart(1, \"span\", 12);\n    i0.ÉµÉµtext(2);\n    i0.ÉµÉµelementEnd()();\n  }\n  if (rf & 2) {\n    const item_r2 = i0.ÉµÉµnextContext().$implicit;\n    const ctx_r2 = i0.ÉµÉµnextContext(2);\n    i0.ÉµÉµclassMap(ctx_r2.getSeatClass(item_r2.seat));\n    i0.ÉµÉµproperty(\"disabled\", ctx_r2.disabled || ctx_r2.isBooked(item_r2.seat))(\"title\", ctx_r2.isBooked(item_r2.seat) ? \"Booked\" : \"Available\");\n    i0.ÉµÉµattribute(\"aria-label\", \"Seat \" + item_r2.label)(\"aria-selected\", ctx_r2.isSelected(item_r2.seat));\n    i0.ÉµÉµadvance(2);\n    i0.ÉµÉµtextInterpolate(item_r2.label);\n  }\n}\nfunction SeatMapComponent_div_1_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ÉµÉµelementContainerStart(0);\n    i0.ÉµÉµtemplate(1, SeatMapComponent_div_1_ng_container_1_div_1_Template, 1, 0, \"div\", 8)(2, SeatMapComponent_div_1_ng_container_1_button_2_Template, 3, 7, \"button\", 9);\n    i0.ÉµÉµelementContainerEnd();\n  }\n  if (rf & 2) {\n    const item_r2 = ctx.$implicit;\n    i0.ÉµÉµadvance();\n    i0.ÉµÉµproperty(\"ngIf\", item_r2.isAisle);\n    i0.ÉµÉµadvance();\n    i0.ÉµÉµproperty(\"ngIf\", !item_r2.isAisle);\n  }\n}\nfunction SeatMapComponent_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ÉµÉµelementStart(0, \"div\", 6);\n    i0.ÉµÉµtemplate(1, SeatMapComponent_div_1_ng_container_1_Template, 3, 2, \"ng-container\", 7);\n    i0.ÉµÉµelementEnd();\n  }\n  if (rf & 2) {\n    const row_r4 = ctx.$implicit;\n    const ctx_r2 = i0.ÉµÉµnextContext();\n    i0.ÉµÉµadvance();\n    i0.ÉµÉµproperty(\"ngForOf\", row_r4)(\"ngForTrackBy\", ctx_r2.trackByIndex);\n  }\n}\nexport class SeatMapComponent {\n  constructor() {\n    this.seats = []; // Pass actual API seats\n    this.disabled = false;\n    this.multiSelect = false;\n    this.selectionChange = new EventEmitter();\n    this.selected = new Set();\n    this.SeatStatus = SeatStatus;\n    this.trackByIndex = (_, v) => v;\n    this.trackBySeatId = (_, seat) => seat.id;\n  }\n  // Generate 2+2 layout with A1, A2, A3, A4 naming\n  get seatLayout() {\n    if (!this.seats || this.seats.length === 0) return [];\n    const rows = ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T'];\n    const layout = [];\n    // Sort seats by row and column\n    const sortedSeats = [...this.seats].sort((a, b) => {\n      if (a.row !== b.row) return a.row - b.row;\n      return a.column - b.column;\n    });\n    // Group by rows\n    const maxRow = Math.max(...this.seats.map(s => s.row));\n    for (let rowNum = 1; rowNum <= maxRow; rowNum++) {\n      const rowSeats = sortedSeats.filter(s => s.row === rowNum);\n      if (rowSeats.length === 0) continue;\n      const rowLabel = rows[rowNum - 1] || `R${rowNum}`;\n      const rowLayout = [];\n      // 2+2 layout: seats 1,2 (left), aisle, seats 3,4 (right)\n      rowSeats.forEach((seat, idx) => {\n        const seatLabel = `${rowLabel}${idx + 1}`;\n        rowLayout.push({\n          seat,\n          label: seatLabel\n        });\n        // Add aisle after 2nd seat\n        if (idx === 1 && rowSeats.length > 2) {\n          rowLayout.push({\n            seat: seat,\n            label: '',\n            isAisle: true\n          });\n        }\n      });\n      layout.push(rowLayout);\n    }\n    return layout;\n  }\n  isBooked(seat) {\n    return seat.status === SeatStatus.Booked || seat.status === SeatStatus.Sold;\n  }\n  isSelected(seat) {\n    return this.selected.has(seat.id);\n  }\n  toggleSeat(seat) {\n    console.log('toggleSeat called:', seat.seatNumber, 'Status:', seat.status);\n    if (this.disabled || this.isBooked(seat)) {\n      console.log('Seat disabled or booked');\n      return;\n    }\n    // Single selection mode - clear others first\n    if (!this.multiSelect) {\n      this.selected.clear();\n    }\n    // Toggle selection using seat ID\n    if (this.selected.has(seat.id)) {\n      this.selected.delete(seat.id);\n    } else {\n      this.selected.add(seat.id);\n    }\n    console.log('Selected seat IDs:', [...this.selected]);\n    // Emit seat IDs, not labels\n    this.selectionChange.emit([...this.selected]);\n  }\n  getSeatClass(seat) {\n    const classes = ['seat'];\n    if (this.isBooked(seat)) {\n      classes.push('booked');\n    } else if (this.isSelected(seat)) {\n      classes.push('selected');\n    } else {\n      classes.push('available');\n    }\n    return classes.join(' ');\n  }\n  getSeatIcon(seat) {\n    if (this.isSelected(seat)) return 'âœ“';\n    if (seat.status === SeatStatus.Available) return 'ðŸ’º';\n    if (seat.status === SeatStatus.Booked) return 'ðŸ”’';\n    if (seat.status === SeatStatus.Sold) return 'âœ–';\n    return '';\n  }\n  static {\n    this.Éµfac = function SeatMapComponent_Factory(t) {\n      return new (t || SeatMapComponent)();\n    };\n  }\n  static {\n    this.Éµcmp = /*@__PURE__*/i0.ÉµÉµdefineComponent({\n      type: SeatMapComponent,\n      selectors: [[\"app-seat-map\"]],\n      inputs: {\n        seats: \"seats\",\n        disabled: \"disabled\",\n        multiSelect: \"multiSelect\"\n      },\n      outputs: {\n        selectionChange: \"selectionChange\"\n      },\n      decls: 9,\n      vars: 2,\n      consts: [[\"role\", \"grid\", \"aria-label\", \"Seat map\", 1, \"seat-grid\"], [\"class\", \"row\", \"role\", \"row\", 4, \"ngFor\", \"ngForOf\", \"ngForTrackBy\"], [1, \"legend\"], [1, \"dot\", \"available\"], [1, \"dot\", \"selected\"], [1, \"dot\", \"booked\"], [\"role\", \"row\", 1, \"row\"], [4, \"ngFor\", \"ngForOf\", \"ngForTrackBy\"], [\"class\", \"aisle\", 4, \"ngIf\"], [\"role\", \"gridcell\", 3, \"class\", \"disabled\", \"title\", \"click\", 4, \"ngIf\"], [1, \"aisle\"], [\"role\", \"gridcell\", 3, \"click\", \"disabled\", \"title\"], [1, \"label\"]],\n      template: function SeatMapComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ÉµÉµelementStart(0, \"div\", 0);\n          i0.ÉµÉµtemplate(1, SeatMapComponent_div_1_Template, 2, 2, \"div\", 1);\n          i0.ÉµÉµelementEnd();\n          i0.ÉµÉµelementStart(2, \"div\", 2);\n          i0.ÉµÉµelement(3, \"span\", 3);\n          i0.ÉµÉµtext(4, \" Available \");\n          i0.ÉµÉµelement(5, \"span\", 4);\n          i0.ÉµÉµtext(6, \" Selected \");\n          i0.ÉµÉµelement(7, \"span\", 5);\n          i0.ÉµÉµtext(8, \" Booked\\n\");\n          i0.ÉµÉµelementEnd();\n        }\n        if (rf & 2) {\n          i0.ÉµÉµadvance();\n          i0.ÉµÉµproperty(\"ngForOf\", ctx.seatLayout)(\"ngForTrackBy\", ctx.trackByIndex);\n        }\n      },\n      dependencies: [i1.NgForOf, i1.NgIf],\n      styles: [\".seat-grid[_ngcontent-%COMP%] {\\n  display: inline-flex;\\n  flex-direction: column;\\n  gap: 10px;\\n  padding: 20px;\\n  background: rgba(255,255,255,0.15);\\n  border-radius: 12px;\\n  backdrop-filter: blur(8px);\\n}\\n\\n.row[_ngcontent-%COMP%] {\\n  display: flex;\\n  gap: 10px;\\n  align-items: center;\\n}\\n\\n.aisle[_ngcontent-%COMP%] {\\n  width: 24px; \\n\\n}\\n\\n.seat[_ngcontent-%COMP%] {\\n  width: 50px;\\n  height: 50px;\\n  border-radius: 10px 10px 4px 4px; \\n\\n  border: 2px solid #2d3748;\\n  background: linear-gradient(180deg, #edf2f7 0%, #e2e8f0 100%);\\n  color: #1a202c;\\n  display: inline-flex;\\n  align-items: center;\\n  justify-content: center;\\n  cursor: pointer;\\n  transition: transform .12s ease, background .2s ease, border-color .2s ease;\\n  -webkit-user-select: none;\\n          user-select: none;\\n  box-shadow: 0 2px 4px rgba(0,0,0,.1);\\n  position: relative;\\n}\\n\\n.seat[_ngcontent-%COMP%]::before {\\n  content: '';\\n  position: absolute;\\n  bottom: -2px;\\n  left: 8px;\\n  right: 8px;\\n  height: 4px;\\n  background: #cbd5e0;\\n  border-radius: 2px;\\n}\\n\\n.seat[_ngcontent-%COMP%]:hover:not(:disabled) { \\n  transform: translateY(-2px);\\n  box-shadow: 0 4px 8px rgba(0,0,0,.15);\\n}\\n\\n.seat[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%] { \\n  font-weight: 700; \\n  font-size: 13px;\\n  z-index: 1;\\n}\\n\\n.seat.selected[_ngcontent-%COMP%] {\\n  background: linear-gradient(180deg, #48bb78 0%, #38a169 100%);\\n  color: white;\\n  border-color: #2f855a;\\n}\\n\\n.seat.selected[_ngcontent-%COMP%]::before { background: #2f855a; }\\n\\n.seat.booked[_ngcontent-%COMP%] {\\n  background: linear-gradient(180deg, #cbd5e0 0%, #a0aec0 100%);\\n  color: #718096;\\n  border-color: #a0aec0;\\n  cursor: not-allowed;\\n  opacity: 0.7;\\n}\\n\\n.seat.booked[_ngcontent-%COMP%]::before { background: #718096; }\\n\\n.legend[_ngcontent-%COMP%] {\\n  margin-top: 16px;\\n  display: flex;\\n  gap: 20px;\\n  align-items: center;\\n  color: #fff;\\n  font-size: 14px;\\n}\\n\\n.legend[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%] {\\n  display: inline-block;\\n  width: 16px; \\n  height: 16px;\\n  border-radius: 4px;\\n  margin-right: 6px;\\n  vertical-align: middle;\\n  border: 1px solid rgba(0,0,0,0.2);\\n}\\n\\n.legend[_ngcontent-%COMP%]   .available[_ngcontent-%COMP%] { background: linear-gradient(180deg, #edf2f7 0%, #e2e8f0 100%); }\\n.legend[_ngcontent-%COMP%]   .selected[_ngcontent-%COMP%]  { background: linear-gradient(180deg, #48bb78 0%, #38a169 100%); }\\n.legend[_ngcontent-%COMP%]   .booked[_ngcontent-%COMP%]    { background: linear-gradient(180deg, #cbd5e0 0%, #a0aec0 100%); }\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY29tcG9uZW50cy9zZWF0LW1hcC9zZWF0LW1hcC5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0Usb0JBQW9CO0VBQ3BCLHNCQUFzQjtFQUN0QixTQUFTO0VBQ1QsYUFBYTtFQUNiLGtDQUFrQztFQUNsQyxtQkFBbUI7RUFDbkIsMEJBQTBCO0FBQzVCOztBQUVBO0VBQ0UsYUFBYTtFQUNiLFNBQVM7RUFDVCxtQkFBbUI7QUFDckI7O0FBRUE7RUFDRSxXQUFXLEVBQUUsb0JBQW9CO0FBQ25DOztBQUVBO0VBQ0UsV0FBVztFQUNYLFlBQVk7RUFDWixnQ0FBZ0MsRUFBRSxtQkFBbUI7RUFDckQseUJBQXlCO0VBQ3pCLDZEQUE2RDtFQUM3RCxjQUFjO0VBQ2Qsb0JBQW9CO0VBQ3BCLG1CQUFtQjtFQUNuQix1QkFBdUI7RUFDdkIsZUFBZTtFQUNmLDJFQUEyRTtFQUMzRSx5QkFBaUI7VUFBakIsaUJBQWlCO0VBQ2pCLG9DQUFvQztFQUNwQyxrQkFBa0I7QUFDcEI7O0FBRUE7RUFDRSxXQUFXO0VBQ1gsa0JBQWtCO0VBQ2xCLFlBQVk7RUFDWixTQUFTO0VBQ1QsVUFBVTtFQUNWLFdBQVc7RUFDWCxtQkFBbUI7RUFDbkIsa0JBQWtCO0FBQ3BCOztBQUVBO0VBQ0UsMkJBQTJCO0VBQzNCLHFDQUFxQztBQUN2Qzs7QUFFQTtFQUNFLGdCQUFnQjtFQUNoQixlQUFlO0VBQ2YsVUFBVTtBQUNaOztBQUVBO0VBQ0UsNkRBQTZEO0VBQzdELFlBQVk7RUFDWixxQkFBcUI7QUFDdkI7O0FBRUEseUJBQXlCLG1CQUFtQixFQUFFOztBQUU5QztFQUNFLDZEQUE2RDtFQUM3RCxjQUFjO0VBQ2QscUJBQXFCO0VBQ3JCLG1CQUFtQjtFQUNuQixZQUFZO0FBQ2Q7O0FBRUEsdUJBQXVCLG1CQUFtQixFQUFFOztBQUU1QztFQUNFLGdCQUFnQjtFQUNoQixhQUFhO0VBQ2IsU0FBUztFQUNULG1CQUFtQjtFQUNuQixXQUFXO0VBQ1gsZUFBZTtBQUNqQjs7QUFFQTtFQUNFLHFCQUFxQjtFQUNyQixXQUFXO0VBQ1gsWUFBWTtFQUNaLGtCQUFrQjtFQUNsQixpQkFBaUI7RUFDakIsc0JBQXNCO0VBQ3RCLGlDQUFpQztBQUNuQzs7QUFFQSxxQkFBcUIsNkRBQTZELEVBQUU7QUFDcEYscUJBQXFCLDZEQUE2RCxFQUFFO0FBQ3BGLHFCQUFxQiw2REFBNkQsRUFBRSIsInNvdXJjZXNDb250ZW50IjpbIi5zZWF0LWdyaWQge1xyXG4gIGRpc3BsYXk6IGlubGluZS1mbGV4O1xyXG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XHJcbiAgZ2FwOiAxMHB4O1xyXG4gIHBhZGRpbmc6IDIwcHg7XHJcbiAgYmFja2dyb3VuZDogcmdiYSgyNTUsMjU1LDI1NSwwLjE1KTtcclxuICBib3JkZXItcmFkaXVzOiAxMnB4O1xyXG4gIGJhY2tkcm9wLWZpbHRlcjogYmx1cig4cHgpO1xyXG59XHJcblxyXG4ucm93IHtcclxuICBkaXNwbGF5OiBmbGV4O1xyXG4gIGdhcDogMTBweDtcclxuICBhbGlnbi1pdGVtczogY2VudGVyO1xyXG59XHJcblxyXG4uYWlzbGUge1xyXG4gIHdpZHRoOiAyNHB4OyAvKiBhaXNsZSBnYXAgd2lkdGggKi9cclxufVxyXG5cclxuLnNlYXQge1xyXG4gIHdpZHRoOiA1MHB4O1xyXG4gIGhlaWdodDogNTBweDtcclxuICBib3JkZXItcmFkaXVzOiAxMHB4IDEwcHggNHB4IDRweDsgLyogYnVzIHNlYXQgc2hhcGUgKi9cclxuICBib3JkZXI6IDJweCBzb2xpZCAjMmQzNzQ4O1xyXG4gIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgxODBkZWcsICNlZGYyZjcgMCUsICNlMmU4ZjAgMTAwJSk7XHJcbiAgY29sb3I6ICMxYTIwMmM7XHJcbiAgZGlzcGxheTogaW5saW5lLWZsZXg7XHJcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcclxuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcclxuICBjdXJzb3I6IHBvaW50ZXI7XHJcbiAgdHJhbnNpdGlvbjogdHJhbnNmb3JtIC4xMnMgZWFzZSwgYmFja2dyb3VuZCAuMnMgZWFzZSwgYm9yZGVyLWNvbG9yIC4ycyBlYXNlO1xyXG4gIHVzZXItc2VsZWN0OiBub25lO1xyXG4gIGJveC1zaGFkb3c6IDAgMnB4IDRweCByZ2JhKDAsMCwwLC4xKTtcclxuICBwb3NpdGlvbjogcmVsYXRpdmU7XHJcbn1cclxuXHJcbi5zZWF0OjpiZWZvcmUge1xyXG4gIGNvbnRlbnQ6ICcnO1xyXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcclxuICBib3R0b206IC0ycHg7XHJcbiAgbGVmdDogOHB4O1xyXG4gIHJpZ2h0OiA4cHg7XHJcbiAgaGVpZ2h0OiA0cHg7XHJcbiAgYmFja2dyb3VuZDogI2NiZDVlMDtcclxuICBib3JkZXItcmFkaXVzOiAycHg7XHJcbn1cclxuXHJcbi5zZWF0OmhvdmVyOm5vdCg6ZGlzYWJsZWQpIHsgXHJcbiAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC0ycHgpO1xyXG4gIGJveC1zaGFkb3c6IDAgNHB4IDhweCByZ2JhKDAsMCwwLC4xNSk7XHJcbn1cclxuXHJcbi5zZWF0IC5sYWJlbCB7IFxyXG4gIGZvbnQtd2VpZ2h0OiA3MDA7IFxyXG4gIGZvbnQtc2l6ZTogMTNweDtcclxuICB6LWluZGV4OiAxO1xyXG59XHJcblxyXG4uc2VhdC5zZWxlY3RlZCB7XHJcbiAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDE4MGRlZywgIzQ4YmI3OCAwJSwgIzM4YTE2OSAxMDAlKTtcclxuICBjb2xvcjogd2hpdGU7XHJcbiAgYm9yZGVyLWNvbG9yOiAjMmY4NTVhO1xyXG59XHJcblxyXG4uc2VhdC5zZWxlY3RlZDo6YmVmb3JlIHsgYmFja2dyb3VuZDogIzJmODU1YTsgfVxyXG5cclxuLnNlYXQuYm9va2VkIHtcclxuICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoMTgwZGVnLCAjY2JkNWUwIDAlLCAjYTBhZWMwIDEwMCUpO1xyXG4gIGNvbG9yOiAjNzE4MDk2O1xyXG4gIGJvcmRlci1jb2xvcjogI2EwYWVjMDtcclxuICBjdXJzb3I6IG5vdC1hbGxvd2VkO1xyXG4gIG9wYWNpdHk6IDAuNztcclxufVxyXG5cclxuLnNlYXQuYm9va2VkOjpiZWZvcmUgeyBiYWNrZ3JvdW5kOiAjNzE4MDk2OyB9XHJcblxyXG4ubGVnZW5kIHtcclxuICBtYXJnaW4tdG9wOiAxNnB4O1xyXG4gIGRpc3BsYXk6IGZsZXg7XHJcbiAgZ2FwOiAyMHB4O1xyXG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XHJcbiAgY29sb3I6ICNmZmY7XHJcbiAgZm9udC1zaXplOiAxNHB4O1xyXG59XHJcblxyXG4ubGVnZW5kIC5kb3Qge1xyXG4gIGRpc3BsYXk6IGlubGluZS1ibG9jaztcclxuICB3aWR0aDogMTZweDsgXHJcbiAgaGVpZ2h0OiAxNnB4O1xyXG4gIGJvcmRlci1yYWRpdXM6IDRweDtcclxuICBtYXJnaW4tcmlnaHQ6IDZweDtcclxuICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlO1xyXG4gIGJvcmRlcjogMXB4IHNvbGlkIHJnYmEoMCwwLDAsMC4yKTtcclxufVxyXG5cclxuLmxlZ2VuZCAuYXZhaWxhYmxlIHsgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDE4MGRlZywgI2VkZjJmNyAwJSwgI2UyZThmMCAxMDAlKTsgfVxyXG4ubGVnZW5kIC5zZWxlY3RlZCAgeyBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoMTgwZGVnLCAjNDhiYjc4IDAlLCAjMzhhMTY5IDEwMCUpOyB9XHJcbi5sZWdlbmQgLmJvb2tlZCAgICB7IGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgxODBkZWcsICNjYmQ1ZTAgMCUsICNhMGFlYzAgMTAwJSk7IH0iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n    });\n  }\n}","map":{"version":3,"names":["EventEmitter","SeatStatus","i0","ÉµÉµelement","ÉµÉµelementStart","ÉµÉµlistener","SeatMapComponent_div_1_ng_container_1_button_2_Template_button_click_0_listener","ÉµÉµrestoreView","_r1","item_r2","ÉµÉµnextContext","$implicit","ctx_r2","ÉµÉµresetView","toggleSeat","seat","ÉµÉµtext","ÉµÉµelementEnd","ÉµÉµclassMap","getSeatClass","ÉµÉµproperty","disabled","isBooked","ÉµÉµadvance","ÉµÉµtextInterpolate","label","ÉµÉµelementContainerStart","ÉµÉµtemplate","SeatMapComponent_div_1_ng_container_1_div_1_Template","SeatMapComponent_div_1_ng_container_1_button_2_Template","isAisle","SeatMapComponent_div_1_ng_container_1_Template","row_r4","trackByIndex","SeatMapComponent","constructor","seats","multiSelect","selectionChange","selected","Set","_","v","trackBySeatId","id","seatLayout","length","rows","layout","sortedSeats","sort","a","b","row","column","maxRow","Math","max","map","s","rowNum","rowSeats","filter","rowLabel","rowLayout","forEach","idx","seatLabel","push","status","Booked","Sold","isSelected","has","console","log","seatNumber","clear","delete","add","emit","classes","join","getSeatIcon","Available","selectors","inputs","outputs","decls","vars","consts","template","SeatMapComponent_Template","rf","ctx","SeatMapComponent_div_1_Template"],"sources":["D:\\BusTicketReservation\\Frontend\\bus-ticket-reservation\\src\\app\\components\\seat-map\\seat-map.component.ts","D:\\BusTicketReservation\\Frontend\\bus-ticket-reservation\\src\\app\\components\\seat-map\\seat-map.component.html"],"sourcesContent":["import { Component, EventEmitter, Input, Output } from '@angular/core';\r\nimport { Seat, SeatStatus } from '../../models/bus.model';\r\n\r\nexport interface SeatLayout {\r\n  rows: string[];          \r\n  seatsPerRow: number[];    \r\n  aisleAfter?: number;      \r\n}\r\n\r\n@Component({\r\n  selector: 'app-seat-map',\r\n  templateUrl: './seat-map.component.html',\r\n  styleUrls: ['./seat-map.component.css']\r\n})\r\nexport class SeatMapComponent {\r\n  @Input() seats: Seat[] = [];  // Pass actual API seats\r\n  @Input() disabled = false;\r\n  @Input() multiSelect = false;\r\n  @Output() selectionChange = new EventEmitter<string[]>();\r\n\r\n  selected = new Set<string>();\r\n  SeatStatus = SeatStatus;\r\n\r\n  // Generate 2+2 layout with A1, A2, A3, A4 naming\r\n  get seatLayout(): { seat: Seat; label: string; isAisle?: boolean }[][] {\r\n    if (!this.seats || this.seats.length === 0) return [];\r\n    \r\n    const rows = ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T'];\r\n    const layout: { seat: Seat; label: string; isAisle?: boolean }[][] = [];\r\n    \r\n    // Sort seats by row and column\r\n    const sortedSeats = [...this.seats].sort((a, b) => {\r\n      if (a.row !== b.row) return a.row - b.row;\r\n      return a.column - b.column;\r\n    });\r\n    \r\n    // Group by rows\r\n    const maxRow = Math.max(...this.seats.map(s => s.row));\r\n    \r\n    for (let rowNum = 1; rowNum <= maxRow; rowNum++) {\r\n      const rowSeats = sortedSeats.filter(s => s.row === rowNum);\r\n      if (rowSeats.length === 0) continue;\r\n      \r\n      const rowLabel = rows[rowNum - 1] || `R${rowNum}`;\r\n      const rowLayout: { seat: Seat; label: string; isAisle?: boolean }[] = [];\r\n      \r\n      // 2+2 layout: seats 1,2 (left), aisle, seats 3,4 (right)\r\n      rowSeats.forEach((seat, idx) => {\r\n        const seatLabel = `${rowLabel}${idx + 1}`;\r\n        rowLayout.push({ seat, label: seatLabel });\r\n        \r\n        // Add aisle after 2nd seat\r\n        if (idx === 1 && rowSeats.length > 2) {\r\n          rowLayout.push({ seat: seat, label: '', isAisle: true });\r\n        }\r\n      });\r\n      \r\n      layout.push(rowLayout);\r\n    }\r\n    \r\n    return layout;\r\n  }\r\n\r\n  isBooked(seat: Seat): boolean {\r\n    return seat.status === SeatStatus.Booked || seat.status === SeatStatus.Sold;\r\n  }\r\n\r\n  isSelected(seat: Seat): boolean {\r\n    return this.selected.has(seat.id);\r\n  }\r\n\r\n  toggleSeat(seat: Seat) {\r\n    console.log('toggleSeat called:', seat.seatNumber, 'Status:', seat.status);\r\n    if (this.disabled || this.isBooked(seat)) {\r\n      console.log('Seat disabled or booked');\r\n      return;\r\n    }\r\n    \r\n    // Single selection mode - clear others first\r\n    if (!this.multiSelect) {\r\n      this.selected.clear();\r\n    }\r\n    \r\n    // Toggle selection using seat ID\r\n    if (this.selected.has(seat.id)) {\r\n      this.selected.delete(seat.id);\r\n    } else {\r\n      this.selected.add(seat.id);\r\n    }\r\n    \r\n    console.log('Selected seat IDs:', [...this.selected]);\r\n    // Emit seat IDs, not labels\r\n    this.selectionChange.emit([...this.selected]);\r\n  }\r\n\r\n  getSeatClass(seat: Seat): string {\r\n    const classes = ['seat'];\r\n    if (this.isBooked(seat)) {\r\n      classes.push('booked');\r\n    } else if (this.isSelected(seat)) {\r\n      classes.push('selected');\r\n    } else {\r\n      classes.push('available');\r\n    }\r\n    return classes.join(' ');\r\n  }\r\n\r\n  getSeatIcon(seat: Seat): string {\r\n    if (this.isSelected(seat)) return 'âœ“';\r\n    if (seat.status === SeatStatus.Available) return 'ðŸ’º';\r\n    if (seat.status === SeatStatus.Booked) return 'ðŸ”’';\r\n    if (seat.status === SeatStatus.Sold) return 'âœ–';\r\n    return '';\r\n  }\r\n\r\n  trackByIndex = (_: number, v: any) => v;\r\n  trackBySeatId = (_: number, seat: Seat) => seat.id;\r\n}","<div class=\"seat-grid\" role=\"grid\" aria-label=\"Seat map\">\r\n  <div class=\"row\" *ngFor=\"let row of seatLayout; trackBy: trackByIndex\" role=\"row\">\r\n    <ng-container *ngFor=\"let item of row; trackBy: trackByIndex\">\r\n      <!-- Aisle gap -->\r\n      <div class=\"aisle\" *ngIf=\"item.isAisle\"></div>\r\n      \r\n      <!-- Seat button -->\r\n      <button\r\n        *ngIf=\"!item.isAisle\"\r\n        [class]=\"getSeatClass(item.seat)\"\r\n        [disabled]=\"disabled || isBooked(item.seat)\"\r\n        (click)=\"toggleSeat(item.seat)\"\r\n        role=\"gridcell\"\r\n        [attr.aria-label]=\"'Seat ' + item.label\"\r\n        [attr.aria-selected]=\"isSelected(item.seat)\"\r\n        [title]=\"isBooked(item.seat) ? 'Booked' : 'Available'\"\r\n      >\r\n        <span class=\"label\">{{ item.label }}</span>\r\n      </button>\r\n    </ng-container>\r\n  </div>\r\n</div>\r\n\r\n<div class=\"legend\">\r\n  <span class=\"dot available\"></span> Available\r\n  <span class=\"dot selected\"></span> Selected\r\n  <span class=\"dot booked\"></span> Booked\r\n</div>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}